const H=new Set(['connection','keep-alive','proxy-authenticate','proxy-authorization','te','trailers','transfer-encoding','upgrade']),C=new Response(null,{status:204,headers:{'access-control-allow-origin':'*','access-control-allow-methods':'*','access-control-allow-headers':'*'}});Deno.serve(async r=>{if(r.method==='OPTIONS')return C;try{const u=new URL(r.url).searchParams.get('url'),p=await fetch(new Request(u,r),{redirect:'manual'}),h=new Headers(p.headers);for(const k of H)h.delete(k);h.set('access-control-allow-origin','*');return new Response(p.body,{status:p.status,statusText:p.statusText,headers:h})}catch{return new Response(null,{status:502})}});
